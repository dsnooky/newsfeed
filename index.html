<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trending News Philippines</title>
<style>
    body {font-family: Arial,sans-serif; margin:0; background:#f4f4f4; color:#333;}
    header {background:#007bff;color:white;padding:20px;text-align:center;}
    header h1 {margin:0;}
    main {padding:20px; max-width:1200px; margin:auto;}
    .news-container {display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:20px;}
    .news-card {background:white; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); overflow:hidden; transition: transform 0.2s;}
    .news-card:hover {transform:scale(1.02);}
    .news-card img {width:100%; height:180px; object-fit:cover;}
    .news-card-content {padding:15px;}
    .news-card-content h3 {margin:0 0 10px; font-size:1.1rem;}
    .news-card-content p {font-size:0.8rem; color:#555;}
    .news-card-content a {display:inline-block; margin-top:10px; color:#007bff; text-decoration:none; font-weight:bold;}
    .news-card-content a:hover {text-decoration:underline;}
    footer {text-align:center; padding:15px; background:#007bff; color:white; margin-top:40px;}
</style>
</head>
<body>

<header>
    <h1>Trending News Philippines</h1>
    <p>Aggregated news from Inquirer, Philippine Star, GMA, and Rappler</p>
</header>

<main>
    <div class="news-container" id="news-container">
        <p>Loading news...</p>
    </div>
</main>

<footer>
    &copy; 2026 Trending News PH
</footer>

<script>
// Philippine news RSS feeds
const rssFeeds = [
    {name: 'Inquirer', url: 'https://www.inquirer.net/feed'},
    {name: 'Philippine Star', url: 'https://www.philstar.com/rss'},
    {name: 'GMA News', url: 'https://www.gmanetwork.com/news/rss/'},
    {name: 'Rappler', url: 'https://www.rappler.com/rss'}
];

const newsContainer = document.getElementById('news-container');

// Helper: Extract first image from content
function extractImageFromContent(html) {
    if (!html) return null;
    const imgMatch = html.match(/<img.*?src="(.*?)"/);
    return imgMatch ? imgMatch[1] : null;
}

// Fetch news from all feeds
async function fetchNews() {
    newsContainer.innerHTML = '';
    let allArticles = [];

    for (let feed of rssFeeds) {
        try {
            const rss2jsonUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feed.url)}`;
            const response = await fetch(rss2jsonUrl);
            const data = await response.json();
            const articles = data.items.map(item => {
                // Determine image
                let image = item.enclosure?.link || item.thumbnail || extractImageFromContent(item.content) || 'https://via.placeholder.com/400x200';
                return {
                    title: item.title,
                    link: item.link,
                    pubDate: new Date(item.pubDate),
                    image: image
                };
            });
            allArticles = allArticles.concat(articles);
        } catch (err) {
            console.error(`Error fetching ${feed.name}:`, err);
        }
    }

    // Sort all articles by date (latest first)
    allArticles.sort((a,b) => b.pubDate - a.pubDate);

    // Display articles
    allArticles.forEach(article => {
        const card = document.createElement('div');
        card.classList.add('news-card');
        card.innerHTML = `
            <img src="${article.image}" alt="News Image">
            <div class="news-card-content">
                <h3>${article.title}</h3>
                <p>${article.pubDate.toLocaleString()}</p>
                <a href="${article.link}" target="_blank">Read More</a>
            </div>
        `;
        newsContainer.appendChild(card);
    });
}

// Initial fetch
fetchNews();

// Auto refresh every 5 minutes
setInterval(fetchNews, 300000);
</script>

</body>
</html>
